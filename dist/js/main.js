"use strict";var levels=document.querySelector(".levels"),img1=document.querySelector(".img1"),img2=document.querySelector(".img2"),img3=document.querySelector(".img3"),imgContainer=document.querySelector(".imgContainer"),levelCount=1,lives=3,Enemy=function(e,n,t){this.x=e,this.y=n,this.speed=t,this.sprite="images/enemy-bug.png"};function randomEnemyMovement(e,n){return Math.random()*(n-e)+e}Enemy.prototype.update=function(e){this.x+=this.speed*(.1*levelCount)*e,520<this.x&&(this.x=0),this.x+83>player.x&&this.x<player.x+80&&this.y+60>player.y&&this.y<player.y+60&&(swal({type:"error",title:"Oops...",text:"You Died!"}),player.x=200,player.y=410,2===--lives?img1.remove():1===lives?(img1.remove(),img2.remove()):0===lives&&(img1.remove(),img2.remove(),img3.remove(),swal({type:"error",title:"Game Over",text:"Play Again!"}),setTimeout(function(){restart()},1e3)))},Enemy.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)};var Player=function(e,n){this.x=e,this.y=n,this.sprite="images/char-boy.png"};Player.prototype.update=function(){this.y<10&&(this.y=this.y+420,levelCount++,levels.textContent=levelCount,swal("Good job!","LEVEL UP!","success"))},Player.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)},Player.prototype.handleInput=function(e){"left"===e&&0<this.x&&(this.x=this.x-100),"up"===e&&0<this.y&&(this.y=this.y-85),"right"===e&&this.x<400&&(this.x=this.x+100),"down"===e&&this.y<385&&(this.y=this.y+85)};var restart=function(){player.x=200,player.y=410,enemy.y=60,enemy1.y=140,enemy2.y=220,levels.innerHTML=1,lives=3,levelCount=1,imgContainer.appendChild(img1),imgContainer.appendChild(img2),imgContainer.appendChild(img3)},allEnemies=[],enemy=new Enemy(0,60,randomEnemyMovement(100,200)),enemy1=new Enemy(0,140,randomEnemyMovement(200,300)),enemy2=new Enemy(0,220,randomEnemyMovement(300,400));allEnemies.push(enemy,enemy1,enemy2);var player=new Player(200,410);document.addEventListener("keyup",function(e){player.handleInput({37:"left",38:"up",39:"right",40:"down"}[e.keyCode])});var Engine=function(e){var t,n=e.document,i=e.window,o=n.createElement("canvas"),r=o.getContext("2d");function a(){var n,e=Date.now();n=(e-t)/1e3,allEnemies.forEach(function(e){e.update(n)}),player.update(),function(){var e,n,t=["images/water-block.png","images/stone-block.png","images/stone-block.png","images/stone-block.png","images/grass-block.png","images/grass-block.png"];for(r.clearRect(0,0,o.width,o.height),e=0;e<6;e++)for(n=0;n<5;n++)r.drawImage(Resources.get(t[e]),101*n,83*e);allEnemies.forEach(function(e){e.render()}),player.render()}(),t=e,i.requestAnimationFrame(a)}o.width=505,o.height=606,n.body.appendChild(o),Resources.load(["images/stone-block.png","images/water-block.png","images/grass-block.png","images/enemy-bug.png","images/char-boy.png"]),Resources.onReady(function(){t=Date.now(),a()}),e.ctx=r}(void 0);!function(){var t={},i=[];function n(e){if(t[e])return t[e];var n=new Image;n.onload=function(){t[e]=n,o()&&i.forEach(function(e){e()})},t[e]=!1,n.src=e}function o(){var e=!0;for(var n in t)t.hasOwnProperty(n)&&!t[n]&&(e=!1);return e}window.Resources={load:function(e){e instanceof Array?e.forEach(function(e){n(e)}):n(e)},get:function(e){return t[e]},onReady:function(e){i.push(e)},isReady:o}}();